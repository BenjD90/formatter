
<html>
<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/github.min.css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="beautify.js"></script>
	<script type="text/javascript" src="benj-beautify.js"></script>
	<script type="text/javascript">
	function selectText(id) {
    var range = document.createRange();
    range.selectNodeContents(document.getElementById(id));
    var sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
}

	$(document).ready(function() {
		window.updateCSSOut = function() {
			var formatChoosen = $('input[name=format]:checked').val();
			$('#pre').removeClass();
			$('#pre').addClass(formatChoosen);
			return formatChoosen;
		};

		function getInputVal() {
			return $('#pre').text();
		}

		hljs.configure({
			tabReplace: ' '
		});

		var format = function() {
			$('#pre').text(getInputVal());
			$('#pre').each(function(i, block) {
				hljs.highlightBlock(block);
			});
		};

		$('textarea').keyup(function() {
			format();
		});

		$('#clear').click(function() {
			$('#pre').html('');
		});

		$('#clearCdata').click(function() {
			$('#pre').text(getInputVal().replace(/(<\!\[CDATA\[)|(\]\]>)/g,''));
		});

		$('#format').click(function() {
			var formatChoosen = updateCSSOut();
			if(formatChoosen === 'xml') {
				$('#pre').text(vkbeautify.xml(getInputVal()));
			} else if(formatChoosen === 'json') {
				$('#pre').text(vkbeautify.json(getInputVal()));
			} else if(formatChoosen === 'bean') {
				$('#pre').text(benjbeautify.bean(getInputVal()));
			}
			format();
		});
	});
</script>
<style type="text/css">
	body {
		margin: 0;
		outline: none;

	}

	.form-control {
		width: inherit;
		display: inline-block;
	}
	.input-xs {
		height: 22px;
		padding: 2px 5px;
		font-size: 12px;
		line-height: 1.5; /* If Placeholder of the input is moved up, rem/modify this. */
		border-radius: 3px;
	}

	.btn:focus {
		outline: none;
	}

	#menu {
		height: 22px;
	}
	#pre {
		background-color: #fff;
		font-family: Consolas;
		font-weight: bold;
		width: 100%;
		height: calc(100% - 22px);
		overflow: auto;
		border-top: 1px solid black;
		border-radius: 0px;
		box-sizing: border-box;
		margin: 0px;
	}

	#pre > span {
		font-weight: normal;
	}

	#pre:focus {
		outline: none;
	}
</style>
<title>Formatter</title>
</head>
<body>
	<div id="menu">
		<input type="text" class="form-control input-xs" onkeyup="$('title').html($('#title').val())" id="title" value="Formatter" />
		<button id="clear" class="btn btn-default btn-xs">Clear</button>
		<button id="format" class="btn btn-default btn-xs">Format</button>
		<button id="select" class="btn btn-default btn-xs" onClick="selectText('pre')">Select output</button>
		<div class="btn-group" data-toggle="buttons">
			<label class="btn btn-primary btn-xs"><input type="radio" name="format" value="xml" onChange="updateCSSOut()" />xml</label>
			<label class="btn btn-primary btn-xs active"><input type="radio" name="format" onChange="updateCSSOut()" value="json" checked />JSON</label>
			<label class="btn btn-primary btn-xs"><input type="radio" name="format" onChange="updateCSSOut()" value="bean" />scala/java bean</label>
			<label class="btn btn-primary btn-xs"><input type="radio" name="format" onChange="updateCSSOut()" value="Nginx" />Nginx</label>
			<label class="btn btn-primary btn-xs"><input type="radio" name="format" onChange="updateCSSOut()" value="Bash" />Bash</label>
			<label class="btn btn-primary btn-xs"><input type="radio" name="format" onChange="updateCSSOut()" value="CSS" />CSS</label>
			<label class="btn btn-primary btn-xs"><input type="radio" name="format" onChange="updateCSSOut()" value="HTTP" />HTTP</label>
		</div>
		<button id="clearCdata" class="btn btn-default btn-xs">Clear CDATA</button>
	</div>
	<pre id="pre" contenteditable></pre>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>
</html>
